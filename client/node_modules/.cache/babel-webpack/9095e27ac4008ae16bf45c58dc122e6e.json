{"ast":null,"code":"import _asyncToGenerator from \"/home/sebastian/Documentos/BBDD_NoSQL/proyectos/practica3/geoplaces/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { NEAREST_KM } from 'src/app/services/items/items.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/items/items.service\";\nimport * as i2 from \"../../components/layout/layout.component\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../ui/item-card/item-card.component\";\n\nfunction TengoCercaHomeComponent_div_1_app_item_card_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-item-card\", 5);\n  }\n\n  if (rf & 2) {\n    const cerveceriaCerca_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"item\", cerveceriaCerca_r4)(\"horizontalStyle\", true)(\"showDistance\", true);\n  }\n}\n\nfunction TengoCercaHomeComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"h1\", 1);\n    i0.ɵɵtext(2, \"Cervecerias\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 2);\n    i0.ɵɵelementStart(4, \"div\", 3);\n    i0.ɵɵtemplate(5, TengoCercaHomeComponent_div_1_app_item_card_5_Template, 1, 3, \"app-item-card\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.tengoCercaCerveceriasLista);\n  }\n}\n\nfunction TengoCercaHomeComponent_div_2_app_item_card_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-item-card\", 5);\n  }\n\n  if (rf & 2) {\n    const universidadCerca_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"item\", universidadCerca_r6)(\"horizontalStyle\", true)(\"showDistance\", true);\n  }\n}\n\nfunction TengoCercaHomeComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"h1\", 1);\n    i0.ɵɵtext(2, \"Universidades\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 2);\n    i0.ɵɵelementStart(4, \"div\", 3);\n    i0.ɵɵtemplate(5, TengoCercaHomeComponent_div_2_app_item_card_5_Template, 1, 3, \"app-item-card\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.tengoCercaUniversidadesLista);\n  }\n}\n\nfunction TengoCercaHomeComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"h1\", 1);\n    i0.ɵɵtext(2, \"\\u00A1Lo lamentamos! No hay nada cerca\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 2);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" No encontramos nada para mostrarte cercano a \", ctx_r2.kms <= 1 ? ctx_r2.kms + \" Kil\\u00F3metro \" : \"los \" + ctx_r2.kms + \" Kil\\u00F3metros\", \" de tu posici\\u00F3n actual. \");\n  }\n}\n\nexport class TengoCercaHomeComponent {\n  constructor(itemsSrv) {\n    this.itemsSrv = itemsSrv;\n    this.tengoCercaLista = [];\n    this.tengoCercaCerveceriasLista = [];\n    this.tengoCercaUniversidadesLista = [];\n    this.tengoCercaFarmaciasLista = [];\n    this.tengoCercaCaesLista = [];\n    this.tengoCercaSupermercadosLista = [];\n    this.kms = NEAREST_KM;\n  }\n\n  ngOnInit() {\n    this.getNearestItems();\n  }\n\n  getNearestItems() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      navigator.geolocation.getCurrentPosition( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (locationResp) {\n          let resp = yield _this.itemsSrv.getNearestItems(locationResp.coords.latitude, locationResp.coords.longitude);\n\n          _this.resetLists();\n          /*if(resp && resp.exito && resp.lugares && resp.lugares.length >= 0){\n            this.tengoCercaLista = resp.lugares;\n            this.tengoCercaLista.forEach(item => {\n              this.splitToOtherLists(item);\n            })\n          } else {\n            alert(resp.messages);\n          }*/\n\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n  resetLists() {\n    this.tengoCercaCerveceriasLista = [];\n    this.tengoCercaCaesLista = [];\n    this.tengoCercaFarmaciasLista = [];\n    this.tengoCercaLista = [];\n    this.tengoCercaSupermercadosLista = [];\n    this.tengoCercaUniversidadesLista = [];\n  }\n\n  splitToOtherLists(item) {\n    switch (item.categoria) {\n      case 'cervecerias':\n        this.tengoCercaCerveceriasLista.push(item);\n        break;\n\n      case 'caes':\n        this.tengoCercaCaesLista.push(item);\n        break;\n\n      case 'farmacias':\n        this.tengoCercaFarmaciasLista.push(item);\n        break;\n\n      case 'supermercados':\n        this.tengoCercaSupermercadosLista.push(item);\n        break;\n\n      case 'universidades':\n        this.tengoCercaUniversidadesLista.push(item);\n        break;\n    }\n  }\n\n}\n\nTengoCercaHomeComponent.ɵfac = function TengoCercaHomeComponent_Factory(t) {\n  return new (t || TengoCercaHomeComponent)(i0.ɵɵdirectiveInject(i1.ItemsService));\n};\n\nTengoCercaHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TengoCercaHomeComponent,\n  selectors: [[\"app-tengo-cerca-home\"]],\n  decls: 4,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [1, \"page-title\"], [1, \"page-content\"], [1, \"page-grid\", \"page-grid-tengo-cerca\"], [3, \"item\", \"horizontalStyle\", \"showDistance\", 4, \"ngFor\", \"ngForOf\"], [3, \"item\", \"horizontalStyle\", \"showDistance\"]],\n  template: function TengoCercaHomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-layout\");\n      i0.ɵɵtemplate(1, TengoCercaHomeComponent_div_1_Template, 6, 1, \"div\", 0);\n      i0.ɵɵtemplate(2, TengoCercaHomeComponent_div_2_Template, 6, 1, \"div\", 0);\n      i0.ɵɵtemplate(3, TengoCercaHomeComponent_div_3_Template, 5, 1, \"div\", 0);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tengoCercaCerveceriasLista && ctx.tengoCercaCerveceriasLista.length > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tengoCercaUniversidadesLista && ctx.tengoCercaUniversidadesLista.length > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.tengoCercaCerveceriasLista.length && ctx.tengoCercaUniversidadesLista.length) <= 0);\n    }\n  },\n  directives: [i2.LayoutComponent, i3.NgIf, i3.NgForOf, i4.ItemCardComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0ZW5nby1jZXJjYS1ob21lLmNvbXBvbmVudC5zY3NzIn0= */\"]\n});","map":{"version":3,"sources":["/home/sebastian/Documentos/BBDD_NoSQL/proyectos/practica3/geoplaces/client/src/app/pages/tengo-cerca-home/tengo-cerca-home.component.ts","/home/sebastian/Documentos/BBDD_NoSQL/proyectos/practica3/geoplaces/client/src/app/pages/tengo-cerca-home/tengo-cerca-home.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ItemsService, NEAREST_KM } from 'src/app/services/items/items.service';\n\n@Component({\n  selector: 'app-tengo-cerca-home',\n  templateUrl: './tengo-cerca-home.component.html',\n  styleUrls: ['./tengo-cerca-home.component.scss']\n})\nexport class TengoCercaHomeComponent implements OnInit {\n\n  tengoCercaLista = [];\n  tengoCercaCerveceriasLista: any[] = [];\n  tengoCercaUniversidadesLista: any[] = [];\n  tengoCercaFarmaciasLista: any[] = [];\n  tengoCercaCaesLista: any[] = [];\n  tengoCercaSupermercadosLista: any[] = [];\n\n  kms = NEAREST_KM;\n\n  constructor(private itemsSrv: ItemsService) { }\n\n  ngOnInit(): void {\n    this.getNearestItems();\n  }\n\n  async getNearestItems(){\n    navigator.geolocation.getCurrentPosition( async locationResp => {\n      let resp = await this.itemsSrv.getNearestItems(locationResp.coords.latitude, locationResp.coords.longitude);\n    \n      this.resetLists();\n\n      /*if(resp && resp.exito && resp.lugares && resp.lugares.length >= 0){\n        this.tengoCercaLista = resp.lugares;\n        this.tengoCercaLista.forEach(item => {\n          this.splitToOtherLists(item);\n        })\n      } else {\n        alert(resp.messages);\n      }*/\n    });\n    \n  }\n\n  resetLists(){\n    this.tengoCercaCerveceriasLista = [];\n    this.tengoCercaCaesLista = [];\n    this.tengoCercaFarmaciasLista = [];\n    this.tengoCercaLista = [];\n    this.tengoCercaSupermercadosLista = [];\n    this.tengoCercaUniversidadesLista = [];\n  }\n\n  splitToOtherLists(item: any){\n    switch (item.categoria) {\n      case 'cervecerias':\n        this.tengoCercaCerveceriasLista.push(item);\n        break;\n      case 'caes':\n        this.tengoCercaCaesLista.push(item);\n        break;\n      case 'farmacias':\n        this.tengoCercaFarmaciasLista.push(item);\n        break;\n      case 'supermercados':\n        this.tengoCercaSupermercadosLista.push(item);\n        break;\n      case 'universidades':\n        this.tengoCercaUniversidadesLista.push(item);\n        break;\n    }\n  }\n}","<app-layout>\n    <div *ngIf=\"tengoCercaCerveceriasLista && tengoCercaCerveceriasLista.length > 0\">\n        <h1 class=\"page-title\">Cervecerias</h1>\n            <div class=\"page-content\">\n                <div class=\"page-grid page-grid-tengo-cerca\">\n                    <app-item-card *ngFor=\"let cerveceriaCerca of tengoCercaCerveceriasLista\" [item]=\"cerveceriaCerca\" [horizontalStyle]=\"true\" [showDistance]=\"true\"></app-item-card>\n                </div>\n            </div>\n        </div>\n    <div *ngIf=\"tengoCercaUniversidadesLista && tengoCercaUniversidadesLista.length > 0\">\n        <h1 class=\"page-title\">Universidades</h1>\n        <div class=\"page-content\">\n            <div class=\"page-grid page-grid-tengo-cerca\">\n                <app-item-card *ngFor=\"let universidadCerca of tengoCercaUniversidadesLista\" [item]=\"universidadCerca\" [horizontalStyle]=\"true\" [showDistance]=\"true\"></app-item-card>\n            </div>\n        </div>\n    </div>\n\n    <div *ngIf=\"(tengoCercaCerveceriasLista.length && tengoCercaUniversidadesLista.length) <= 0\">\n        <h1 class=\"page-title\">¡Lo lamentamos! No hay nada cerca</h1>\n        <div class=\"page-content\">\n            No encontramos nada para mostrarte cercano a {{ kms<=1 ? kms +' Kilómetro ' : 'los ' + kms + ' Kilómetros' }} de tu posición actual.\n        </div>\n    </div>\n</app-layout>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}