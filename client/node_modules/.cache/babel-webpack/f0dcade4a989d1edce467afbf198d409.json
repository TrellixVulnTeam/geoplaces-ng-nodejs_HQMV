{"ast":null,"code":"import _asyncToGenerator from \"/home/sebastian/Documentos/BBDD_NoSQL/proyectos/practica3/geoplaces/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../http/http-helper.service\";\nconst NEAREST_KM = 6;\nexport class ItemsService {\n  constructor(httpHlp) {\n    this.httpHlp = httpHlp;\n    this.urlSaveItem = '/save_item';\n    this.urlGetItemsByCategory = '/itemslist_by_category';\n    this.urlGetNearestItems = '/nearest_places_by_distance';\n  }\n\n  saveItem(body) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const response = yield _this.httpHlp.post({\n        url: _this.urlSaveItem,\n        body: body\n      });\n      return response;\n    })();\n  }\n\n  getItemsListByCategory(category) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const response = yield _this2.httpHlp.get({\n        url: _this2.urlGetItemsByCategory,\n        body: {\n          category: category\n        }\n      });\n      response.lugares = response.lugares.sort((a, b) => {\n        if (a['nombre'] > b['nombre']) {\n          return 1;\n        } else if (a['nombre'] < b['nombre']) {\n          return -1;\n        } else {\n          return 0;\n        }\n      });\n      return response;\n    })();\n  }\n\n  getNearestItems(lat, lng) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const response = yield _this3.httpHlp.get({\n        url: _this3.urlGetNearestItems,\n        body: {\n          distance: NEAREST_KM\n        }\n      });\n      console.log(response);\n      return response;\n    })();\n  }\n\n}\n\nItemsService.ɵfac = function ItemsService_Factory(t) {\n  return new (t || ItemsService)(i0.ɵɵinject(i1.HttpHelperService));\n};\n\nItemsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ItemsService,\n  factory: ItemsService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["/home/sebastian/Documentos/BBDD_NoSQL/proyectos/practica3/geoplaces/client/src/app/services/items/items.service.ts"],"names":[],"mappings":";;;AAGA,MAAM,UAAU,GAAG,CAAnB;AAKA,OAAM,MAAO,YAAP,CAAmB;AAMvB,EAAA,WAAA,CAAoB,OAApB,EAA8C;AAA1B,SAAA,OAAA,GAAA,OAAA;AAJZ,SAAA,WAAA,GAAc,YAAd;AACA,SAAA,qBAAA,GAAwB,wBAAxB;AACA,SAAA,kBAAA,GAAqB,6BAArB;AAE2C;;AAE7C,EAAA,QAAQ,CAAC,IAAD,EAAU;AAAA;;AAAA;AACtB,YAAM,QAAQ,SAAS,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAE,QAAA,GAAG,EAAE,KAAI,CAAC,WAAZ;AAAyB,QAAA,IAAI,EAAE;AAA/B,OAAlB,CAAvB;AACA,aAAO,QAAP;AAFsB;AAGvB;;AAEK,EAAA,sBAAsB,CAAC,QAAD,EAAiB;AAAA;;AAAA;AAC3C,YAAM,QAAQ,SAAS,MAAI,CAAC,OAAL,CAAa,GAAb,CAAiB;AAAE,QAAA,GAAG,EAAE,MAAI,CAAC,qBAAZ;AAAmC,QAAA,IAAI,EAAE;AAAC,UAAA,QAAQ,EAAE;AAAX;AAAzC,OAAjB,CAAvB;AACA,MAAA,QAAQ,CAAC,OAAT,GAAmB,QAAQ,CAAC,OAAT,CAAiB,IAAjB,CAAsB,CAAC,CAAD,EAAS,CAAT,KAAmB;AAC1D,YAAI,CAAC,CAAC,QAAD,CAAD,GAAc,CAAC,CAAC,QAAD,CAAnB,EAA+B;AAC7B,iBAAO,CAAP;AACD,SAFD,MAEO,IAAI,CAAC,CAAC,QAAD,CAAD,GAAc,CAAC,CAAC,QAAD,CAAnB,EAA+B;AACpC,iBAAO,CAAC,CAAR;AACD,SAFM,MAEA;AACL,iBAAO,CAAP;AACD;AACF,OARkB,CAAnB;AASA,aAAO,QAAP;AAX2C;AAY5C;;AAEK,EAAA,eAAe,CAAC,GAAD,EAAc,GAAd,EAAyB;AAAA;;AAAA;AAC5C,YAAM,QAAQ,SAAS,MAAI,CAAC,OAAL,CAAa,GAAb,CAAiB;AAAC,QAAA,GAAG,EAAE,MAAI,CAAC,kBAAX;AAA+B,QAAA,IAAI,EAAE;AAAC,UAAA,QAAQ,EAAE;AAAX;AAArC,OAAjB,CAAvB;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACA,aAAO,QAAP;AAH4C;AAK7C;;AAhCsB;;;mBAAZ,Y,EAAY,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,iBAAA,C;AAAA,C;;;SAAZ,Y;AAAY,EAAA,OAAA,EAAZ,YAAY,CAAA,I;AAAA,EAAA,UAAA,EAFX","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpHelperService } from '../http/http-helper.service';\n\nconst NEAREST_KM = 6;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ItemsService {\n\n  private urlSaveItem = '/save_item';\n  private urlGetItemsByCategory = '/itemslist_by_category';\n  private urlGetNearestItems = '/nearest_places_by_distance';\n  \n  constructor(private httpHlp: HttpHelperService) { }\n\n  async saveItem(body: any){\n    const response = await this.httpHlp.post({ url: this.urlSaveItem, body: body });\n    return response;\n  }\n\n  async getItemsListByCategory(category: string){\n    const response = await this.httpHlp.get({ url: this.urlGetItemsByCategory, body: {category: category} });\n    response.lugares = response.lugares.sort((a: any, b: any) => {\n      if (a['nombre'] > b['nombre']) {\n        return 1;\n      } else if (a['nombre'] < b['nombre']) {\n        return -1;\n      } else {\n        return 0;\n      }\n    });\n    return response;\n  }\n\n  async getNearestItems(lat: number, lng: number){\n    const response = await this.httpHlp.get({url: this.urlGetNearestItems, body: {distance: NEAREST_KM}});\n    console.log(response);\n    return response;\n    \n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}